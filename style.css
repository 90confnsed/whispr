* { box-sizing:border-box; font-family:'Prompt',sans-serif; }

body{
  margin:0;
  background:url('media/background3.gif') no-repeat center center fixed;
  background-size:cover;
  color:#333;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  position:relative;
  overflow:hidden;
}

body::before{
  content:"";
  position:absolute;
  inset:0;
  background:rgba(0,0,0,0.3);
  z-index:0;
}

.chat-container{
  background-color:#ffffffcc;
  width:480px;
  max-width:95%;
  border-radius:25px;
  box-shadow:0 0 15px rgba(74,144,226,0.8),0 10px 40px rgba(0,0,0,0.25);
  display:flex;
  flex-direction:column;
  overflow:hidden;
  backdrop-filter:blur(12px);
  position:relative;
  z-index:1;
  border:2px solid rgba(74,144,226,0.7);
}

.header{
  background:#4a90e2;
  color:white;
  padding:20px;
  font-size:26px;
  font-weight:700;
  border-top-left-radius:25px;
  border-top-right-radius:25px;
  text-align:center;
}

/* ปุ่มเพลงลอยมุมบนขวา */
#musicBtn{
  position:fixed;
  top:15px;
  right:15px;
  width:36px;
  height:36px;
  border-radius:50%;
  background:#4a90e2;
  color:white;
  font-size:18px;
  cursor:pointer;
  z-index:9999;
  display:flex;
  justify-content:center;
  align-items:center;
  transition:transform 0.2s, background 0.3s;
  box-shadow:0 4px 12px rgba(0,0,0,0.3);
}

#musicBtn:hover{
  background:#357dcf;
  transform:scale(1.2);
}

#musicBtn.playing{
  animation:bounceMusic 1s infinite alternate;
}

@keyframes bounceMusic{
  0%{transform:scale(1) translateY(0) rotate(0deg);}
  50%{transform:scale(1.3) translateY(-4px) rotate(10deg);}
  100%{transform:scale(1) translateY(0) rotate(-10deg);}
}

/* Chatbox / bubble เหมือนเดิม */
.chat-box{flex-grow:1;padding:20px;overflow-y:auto;height:500px;background-color:transparent;scrollbar-width:thin;scrollbar-color:#4a90e2 #d0d7e8;}
.chat-box::-webkit-scrollbar{width:8px;}
.chat-box::-webkit-scrollbar-track{background:#d0d7e8;border-radius:4px;}
.chat-box::-webkit-scrollbar-thumb{background:#4a90e2;border-radius:4px;}
.message{margin:15px 0;padding:16px 24px;border-radius:30px;word-wrap:break-word;font-size:16px;box-shadow:0 6px 15px rgba(74,144,226,0.2);opacity:0;transform:translateY(15px);animation:bubbleFadeIn 0.5s forwards;position:relative;}
@keyframes bubbleFadeIn{to{opacity:1;transform:translateY(0);}}
.message::before{content:"";position:absolute;border-radius:50%;width:6px;height:6px;background:rgba(74,144,226,0.3);top:10px;left:10px;box-shadow:15px 5px rgba(74,144,226,0.3),25px 15px rgba(74,144,226,0.2),35px 8px rgba(74,144,226,0.25),40px 20px rgba(74,144,226,0.3);animation:pulse 2.5s infinite;z-index:-1;}
@keyframes pulse{0%,100%{opacity:0.3;transform:scale(1);}50%{opacity:0.6;transform:scale(1.2);}}
.user{background:#cce8ff;align-self:flex-end;text-align:right;border-bottom-right-radius:5px;box-shadow:0 4px 10px rgba(0,102,204,0.3);margin-left:auto;max-width:75%;width:fit-content;}
.user::after{content:"";position:absolute;right:-14px;bottom:0;width:0;height:0;border-top:16px solid #cce8ff;border-left:16px solid transparent;}
.bot{background:#e8efff;align-self:flex-start;text-align:left;border-bottom-left-radius:5px;box-shadow:0 4px 10px rgba(102,136,204,0.3);max-width:75%;width:fit-content;}
.bot::after{content:"";position:absolute;left:-14px;bottom:0;width:0;height:0;border-top:16px solid #e8efff;border-right:16px solid transparent;}
.input-box{display:flex;padding:14px 18px;border-top:1px solid #ccc;background:#ffffffcc;backdrop-filter:blur(10px);}
input{flex-grow:1;border:1.5px solid #4a90e2;border-radius:30px;padding:14px 20px;font-size:16px;outline:none;background:#f0f8ff;color:#333;transition:border-color 0.3s ease;}
input:focus{border-color:#357dcf;}
button{margin-left:12px;border:none;border-radius:30px;background:#4a90e2;color:white;padding:14px 28px;font-size:16px;cursor:pointer;transition:background 0.3s,box-shadow 0.3s;box-shadow:0 6px 15px rgba(74,144,226,0.4);}
button:hover{background:#357dcf;box-shadow:0 8px 20px rgba(53,125,207,0.7);}
@media(max-width:520px){.chat-container{width:100%;}.chat-box{height:400px;padding:15px 20px;}input{padding:12px 16px;font-size:14px;}button{padding:12px 20px;font-size:14px;}}